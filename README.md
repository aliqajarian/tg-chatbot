# Telegram Chatbot with OpenRouter LLM Integration

This is a PHP-based Telegram bot that uses OpenRouter's free LLM API to respond to messages in Telegram group chats. The bot can respond when mentioned directly or when users reply to its messages, enabling conversational interactions.

## Features

- Responds to messages in Telegram group chats where the bot is mentioned
- Uses OpenRouter's free Mistral 7B model for generating responses
- Easy to set up and deploy

## Prerequisites

1. A Telegram bot token (obtained from [@BotFather](https://t.me/BotFather) on Telegram)
2. An OpenRouter API key (obtained from [OpenRouter.ai](https://openrouter.ai/))
3. A PHP-enabled web server with internet access
4. SSL certificate for your domain (required by Telegram)

## Setup Instructions

### 1. Clone or Download the Repository

```bash
git clone https://github.com/your-username/tg-chatbot.git
```

Or download the ZIP file and extract it to your web server directory.

### 2. Configure the Bot

Edit the `config.php` file and replace the placeholder values with your actual tokens:

```php
// Telegram Bot Configuration
$telegramBotToken = 'YOUR_TELEGRAM_BOT_TOKEN';  // Replace with your Telegram bot token

// OpenRouter API Configuration
$openRouterApiKey = 'YOUR_OPENROUTER_API_KEY';  // Replace with your OpenRouter API key

// LLM Configuration
$llmModel = 'mistralai/mistral-7b-instruct:free';  // Choose from the available models
$maxTokens = 500;  // Maximum number of tokens in the response

// Bot Behavior Configuration
$botName = 'Telegram LLM Bot';  // Name of your bot
```

You can choose from several free LLM models:
- `mistralai/mistral-7b-instruct:free` (default)
- `google/gemma-7b-it:free`
- `microsoft/phi-3-mini-128k-instruct:free`
- `openchat/openchat-7b:free`
- `neversleep/llama-3-lumimaid-8b:free`

### 3. Set up Webhook

For the bot to receive updates from Telegram, you need to set up a webhook. Replace `YOUR_DOMAIN` and `YOUR_BOT_TOKEN` with your actual domain and bot token:

```bash
curl -F "url=https://YOUR_DOMAIN/bot.php" https://api.telegram.org/botYOUR_BOT_TOKEN/setWebhook
```

Alternatively, you can set the webhook by visiting this URL in your browser:

```
https://api.telegram.org/botYOUR_BOT_TOKEN/setWebhook?url=https://YOUR_DOMAIN/bot.php
```

### 4. Add Bot to Group Chat

1. Create a group chat in Telegram
2. Add your bot to the group chat
3. Give the bot permission to read messages and send messages

## Usage

Once the bot is set up:

1. In a group chat where the bot is present, mention the bot using `@username` followed by your question
2. The bot will respond directly to your message with an AI-generated answer

Example:
```
User: @yourbot_name What is the weather like today?
Bot: (responds with weather information generated by the LLM)
```

## How It Works

1. The bot listens for incoming messages via Telegram's webhook system
2. When a message is received in a group chat, it checks if the bot is mentioned
3. If mentioned, it extracts the question and sends it to OpenRouter's LLM API
4. The LLM response is then sent back to the group chat as a reply to the original message

## Customization

You can customize the bot by modifying the following parameters in `bot.php`:

- **LLM Model**: Change the `model` parameter in the `getLLMResponse` function to use a different model from OpenRouter
- **Response Length**: Adjust the `max_tokens` parameter to control response length
- **Bot Behavior**: Modify the prompt or add additional logic to the message processing

## Troubleshooting

- Ensure your webhook URL is accessible from the internet
- Check that your SSL certificate is valid
- Verify that your bot token and OpenRouter API key are correct
- Check your server's error logs for any PHP errors

## License

This project is open source and available under the MIT License.
